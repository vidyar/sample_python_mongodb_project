language: python


python:
  - 2.7

# Mongo binds to 127.0.0.1 by default
services:
  - mongodb

env:
 global:
  - secure: 3zU0jCsM6phM7IMxvzT6bT2KjBV8aAsAlUqkic3iMOAv3MSNn6GVKz36Pe9JccbZv3SHoUtLyO5A30QPSHzZjOBfmBwv3S3pW7iOCNYbVNfmivbT51ZGBiJEI47bEtbXpw+5keMt9zKWg20X6vHaXjruLZPJEFd+8bZlzJ+dPofPji9wUwrAtaGF80VWujkPd5TSDED+XhUDBLJZFLz4KpMEohj8nCWNb+zGZeeSBAA2Bd8XjsgWTYCFmEV5cIhlQOhxfWGZjcujgrK6iUiZnuYUD8wIhiSamPAU09uBL2fDTKFq9K67b05i5wCJNBs/AqqaAlat9/sK74oUKh65Fw==
  - name=vidya
  
install:
  - pip install -r requirements.txt

# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - nosetests test.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - which python && coverage run --branch test.py
  - which python && coverage xml -o shippable/codecoverage/coverage.xml test.py
  - echo $foo and $name 
  
notifications:
  email: false

archive: true
branches:
   only:
      - v0.24
